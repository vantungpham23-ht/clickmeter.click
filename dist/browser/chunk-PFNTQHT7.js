import{d as L,e as O}from"./chunk-GA4LSX4L.js";import{a as D,b as K,c as V,d as I,e as F,f as N,j as W,k as T,m as B}from"./chunk-ZB4PSO4W.js";import{c as A}from"./chunk-RQ6ZZBPF.js";import"./chunk-X5YLR3NI.js";import{Ea as _,Ga as m,Ia as e,Ja as n,La as v,Ma as M,Na as C,Oa as E,Pa as i,Ra as c,Sa as h,Ta as f,Ua as b,V as w,Wa as S,ba as p,ca as u,sb as k,ta as o,ua as x,ub as P}from"./chunk-VW5W7YTQ.js";import{i as y}from"./chunk-ODN5LVDJ.js";function R(d,a){if(d&1&&(e(0,"div",20),i(1),n()),d&2){let s=C();o(),c(" ",s.keyErrorMessage," ")}}function q(d,a){if(d&1&&(e(0,"div",20),i(1),n()),d&2){let s=C();o(),c(" ",s.errorMessage," ")}}var z=class d{constructor(a,s){this.authService=a;this.router=s}email="";password="";authKey="";isLoading=!1;isKeyLoading=!1;errorMessage="";keyErrorMessage="";onKeySubmit(){return y(this,null,function*(){if(!this.authKey){this.keyErrorMessage="Vui l\xF2ng nh\u1EADp key";return}this.isKeyLoading=!0,this.keyErrorMessage="";try{(yield this.authService.signInWithKey(this.authKey))?this.router.navigate(["/dashboard"]):this.keyErrorMessage='Key kh\xF4ng \u0111\xFAng. Vui l\xF2ng nh\u1EADp "CLICKMETER"'}catch(a){this.keyErrorMessage=a.message||"\u0110\u0103ng nh\u1EADp th\u1EA5t b\u1EA1i"}finally{this.isKeyLoading=!1}})}onSubmit(){return y(this,null,function*(){if(!this.email||!this.password){this.errorMessage="Vui l\xF2ng nh\u1EADp \u0111\u1EA7y \u0111\u1EE7 email v\xE0 m\u1EADt kh\u1EA9u";return}this.isLoading=!0,this.errorMessage="";try{yield this.authService.signIn(this.email,this.password),this.router.navigate(["/dashboard"])}catch(a){this.errorMessage=a.message||"\u0110\u0103ng nh\u1EADp th\u1EA5t b\u1EA1i"}finally{this.isLoading=!1}})}static \u0275fac=function(s){return new(s||d)(x(A),x(L))};static \u0275cmp=w({type:d,selectors:[["app-login"]],standalone:!0,features:[S],decls:40,vars:9,consts:[["keyForm","ngForm"],["loginForm","ngForm"],[1,"login-container"],[1,"login-card"],[1,"simple-auth-section"],[3,"ngSubmit"],[1,"form-group"],["for","authKey"],["type","text","id","authKey","name","authKey","required","","placeholder","Nh\u1EADp key \u0111\u1EC3 \u0111\u0103ng nh\u1EADp",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"divider"],[1,"regular-auth-section"],["for","email"],["type","email","id","email","name","email","required","","email","","placeholder","Nh\u1EADp email c\u1EE7a b\u1EA1n",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn-secondary",3,"disabled"],[1,"signup-link"],["routerLink","/signup",1,"link"],[1,"error-message"]],template:function(s,t){if(s&1){let g=v();e(0,"div",2)(1,"div",3)(2,"h2"),i(3,"\u0110\u0103ng nh\u1EADp"),n(),e(4,"div",4)(5,"h3"),i(6,"\u0110\u0103ng nh\u1EADp nhanh"),n(),e(7,"form",5,0),M("ngSubmit",function(){return p(g),u(t.onKeySubmit())}),e(9,"div",6)(10,"label",7),i(11,"Nh\u1EADp key:"),n(),e(12,"input",8),b("ngModelChange",function(r){return p(g),f(t.authKey,r)||(t.authKey=r),u(r)}),n()(),_(13,R,2,1,"div",9),e(14,"button",10),i(15),n()()(),e(16,"div",11)(17,"span"),i(18,"ho\u1EB7c"),n()(),e(19,"div",12)(20,"h3"),i(21,"\u0110\u0103ng nh\u1EADp th\xF4ng th\u01B0\u1EDDng"),n(),e(22,"form",5,1),M("ngSubmit",function(){return p(g),u(t.onSubmit())}),e(24,"div",6)(25,"label",13),i(26,"Email:"),n(),e(27,"input",14),b("ngModelChange",function(r){return p(g),f(t.email,r)||(t.email=r),u(r)}),n()(),e(28,"div",6)(29,"label",15),i(30,"M\u1EADt kh\u1EA9u:"),n(),e(31,"input",16),b("ngModelChange",function(r){return p(g),f(t.password,r)||(t.password=r),u(r)}),n()(),_(32,q,2,1,"div",9),e(33,"button",17),i(34),n()(),e(35,"div",18)(36,"p"),i(37,"Ch\u01B0a c\xF3 t\xE0i kho\u1EA3n? "),e(38,"a",19),i(39,"\u0110\u0103ng k\xFD ngay"),n()()()()()()}if(s&2){let g=E(8),l=E(23);o(12),h("ngModel",t.authKey),o(),m("ngIf",t.keyErrorMessage),o(),m("disabled",t.isKeyLoading||!g.form.valid),o(),c(" ",t.isKeyLoading?"\u0110ang \u0111\u0103ng nh\u1EADp...":"\u0110\u0103ng nh\u1EADp v\u1EDBi Key"," "),o(12),h("ngModel",t.email),o(4),h("ngModel",t.password),o(),m("ngIf",t.errorMessage),o(),m("disabled",t.isLoading||!l.form.valid),o(),c(" ",t.isLoading?"\u0110ang \u0111\u0103ng nh\u1EADp...":"\u0110\u0103ng nh\u1EADp"," ")}},dependencies:[P,k,B,N,D,K,V,W,T,F,I,O],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 30px #0003;width:100%;max-width:500px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333;font-weight:600}h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#555;font-weight:500;font-size:18px}.simple-auth-section[_ngcontent-%COMP%]{margin-bottom:30px}.divider[_ngcontent-%COMP%]{text-align:center;margin:30px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e1e5e9}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 15px;color:#666;font-size:14px}.regular-auth-section[_ngcontent-%COMP%]{margin-top:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e1e5e9;border-radius:6px;font-size:16px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.error-message[_ngcontent-%COMP%]{color:#e74c3c;background:#fdf2f2;padding:10px;border-radius:6px;margin-bottom:20px;border-left:4px solid #e74c3c}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.btn-secondary[_ngcontent-%COMP%]{width:100%;padding:12px;background:#6c757d;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #6c757d66}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.signup-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.signup-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.link[_ngcontent-%COMP%]{color:#667eea;cursor:pointer;font-weight:500}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}']})};export{z as LoginComponent};
